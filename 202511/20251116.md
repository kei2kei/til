# 2025 年 11 月 16 日 日報

## 📅 日付

2025 年 11 月 16 日

## ✅ 本日の学習内容

- Reactチュートリアル
- Next.jsチュートリアル

---

## 勉強になったこと

- Reactチュートリアル
  - 避難ハッチ
      - Effect
          - レンダー自体の副作用を指定するためのもの
          - コミットの最後に実行される
          - Reactの外部システムと同期するために使用される
              - API
              - ネットワーク
          - 使い方
              - 宣言
                  - `useEffect(()⇒{// xxx} return ~~~})`
              - 依存配列の指定
                  - `useEffect(()⇒{// xxx} return ~~~}, [])`
              - 必要に応じたクリーンアップ

                  ```tsx
                  useEffect(()⇒{
                    // xxx
                    return () => {
                      connection.disconnect();
                    };
                  },[])
                  ```
                  
              - 2回連続などでEffectが発動しても問題ない状態にしておく
          - 不要なEffect
              - レンダーでのデータ変換に使うEffect
              - ユーザーイベントの処理
                  - 製品の購入など
              - 重たい計算(1ms以上)の場合はメモ化した方が良い
              - stateのリセットなどはkeyベースで試みる
              - コンポーネントの表示がトリガーで実行されるべきコードでない場合(特定のユーザーの動きなどによるイベントの場合)
          - ライフサイクル
              - エフェクトは1つの独立した同期処理をするように設定する
                  - ロジックごとに分割などをすると読みやすくても複雑化してしまう
              - propsやstateに反応させたくない
                  - 依存先を内側に取り込むか、非リアクティブな部分（Reactの外側）に分離する
              - オブジェクトや関数は依存配列にしない
                  - 無限ループが起きてしまう
          - エフェクトからイベントを分離
              - イベントハンドラ
                  - 具体的なユーザー操作に反応して実行
                  - ロジックがリアクティブではない
                      - 値の変化に左右されずに値の読み取りなどができる
              - エフェクト
                  - 同期が必要な時に常に実行
                  - ロジックがリアクティブ
                      - 読み取った値に反応してロジックを再実行
                  - エフェクト内の非リアクティブな処理はuseEffectEventで外出し可能
          - カスタムフック
              - フックの名前は常にuseで始める
              - 何をやるのか明確にuse~~の部分で示す+キャメルケース
              - 関数内でreactHooksを使わないのであれば通常関数にすること
              - state自体ではなくstateを使うロジックを共有する
          - 使用タイミング
              - エフェクトをカスタムフックにラップすることでわかりやすくなる場合
- Next.jsチュートリアル
  - CSS適用
    - 基本はlayout.tsx（トップレベル）にglobal.cssを適用
    - Tailwindがデフォルトで適用されるが直接CSSを適用させることも可能
    - propsなどによって適用CSSをコントロールするclsxという書き方もある
        
        ```tsx
        'rounded-l-md': position === 'first' || position === 'single',
        ```
        
  - フォント
      - ビルドタイム時にダウンロードしてから適用させるため、新たに通信などは不要
  - データ抽出
      - ウォーターフォール型
          - 前の処理が終わってから次の処理を始めるような処理の流れ
          - 前の処理に依存した処理を後続に持っている場合は有効
          - パフォーマンスは下がる
      - パラレル型
          - 例
              
              ```tsx
              Promise.all() or Promise.allSettled()
              ```
              
          - 一度にデータを持ってくる分処理が速い
          - 一つの処理の遅れが全体の速度に響いてしまう
  - 静的/動的レンダリング
      - 静的レンダリング
          - ビルド時のデータ抽出やレンダリングなど
          - あらかじめレンダリングされているので速いアクセスが可能
          - キャッシュによるサーバー負荷減少
          - SEO対策
      - 動的レンダリング
          - ユーザーのリクエストベースでのレンダリング
          - 最新データの反映
          - パーソナライズされたデータ
          - リクエスト時の情報（cookieやURLparameter）へのアクセス
  - ストリーミング
      - パラレル型でのデータ抽出のような一つのデータ抽出の遅れでの影響をチャンクに分けることで回避する
      - できる部分からのロードでUX向上
      - 適用方法
          - ページ単位でloading.tsxを配置
              - ロード中のUI(fallbackUI)を記述し、反映できる
          - コンポーネントレベルで適用したい場合は<Suspense>で囲む
              - グルーピングしたい場合はWrapperコンポーネントで個々のコンポーネントを包むといい
  - 検索とページネーションの追加
      - **`useSearchParams`** - 現在のURLのパラメータにアクセスできます。例えば、このURL `/dashboard/invoices?page=1&query=pending` の検索パラメータは次のようになります:`{page: '1', query: 'pending'}`
      - **`usePathname`** - 現在のURLのパス名を読み取ることができます。例えば、ルート `/dashboard/invoices` の場合、`usePathname` は `'/dashboard/invoices'` を返します。
      - **`useRouter`** - クライアントコンポーネント内でプログラム的にルート間のナビゲーションを可能にします。使用できる[複数のメソッド](https://nextjs.org/docs/app/api-reference/functions/use-router#userouter)があります。
      - デバウンス
          - １文字ずつなどの検索はDBへの負荷がかかるため、まとめて検索をしたいときに必要なのがデバウンス
          - インストール
              - `pnpm i use-debounce`
              - Search用コンポーネント内で関数を`useDebouncedCallback`で作成
              - delay用の秒数を与えればそれが終わった後に検索


## KPT 振り返り

### Keep (良かったこと、続けること)

- 長時間集中してできた
- Reactチュートリアルを目標通り制覇

### Problem (問題点、改善したいこと)

- Reactチュートリアルは時間をかけすぎてしまった。計画性をもっともってマイルストーンを建てるなどしておきたい。

### Try (次に試すこと、改善策)

- 次週からはNext.jsのチュートリアルはすぐ終わらせ簡単なプロジェクトを作成したい

- #### 今後やることリスト
  - [ ] Next.jsチュートリアル
  - [ ] 簡易プロジェクト
  - [ ] カリキュラム
    - [ ] 卒制テーマ決め
    - [ ] スケジュール感想定
  - [ ] NextJS アプリ作成
  - [ ] 自己分析面談

---

## 💡 その他・特記事項

- 特になし
